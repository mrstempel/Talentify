function lockApiCall(n){sendSemaphore=!0;$("#"+n).addClass("disabled")}function unlockApiCall(n){sendSemaphore=!1;$("#"+n).removeClass("disabled")}function login(){$.ajax({url:"/Auth/Login",type:"get",async:!0,data:{email:$("#login-email").val(),password:$("#login-password").val()},success:function(n){location.href=n==1?getUrlParam("ReturnUrl")!=""?decodeURIComponent(getUrlParam("ReturnUrl")):"/Start":n==2?"/Highscore/Talentecheck":"/Login/Error?ReturnUrl="+getUrlParam("ReturnUrl")},error:function(){location.href="/Login/Error"}})}function submitLoginScreenForm(){if(!validateMandatoryFields())return!1;$.ajax({url:"/Auth/Login",type:"get",async:!0,data:{email:$("#login-email-screen").val(),password:$("#login-password-screen").val()},success:function(n){location.href=n==1?getUrlParam("ReturnUrl")!=""?decodeURIComponent(getUrlParam("ReturnUrl")):"/Start":n==2?"/Highscore/Talentecheck":"/Login/Error?ReturnUrl="+getUrlParam("ReturnUrl")},error:function(){location.href="/Login/Error"}})}function logout(){$.ajax({url:"/Auth/Logout",type:"get",async:!0,success:function(){location.href="/Home"},error:function(){location.href="/Home"}})}function deleteAccount(){confirm("Willst du dein Konto wirklich löschen?")&&$.ajax({url:"/Auth/DeleteAccount",type:"get",async:!0,success:function(n){n&&logout()},error:function(){}})}function setInputSwitch(n,t){changeInputSwitch(n);var r=$("#"+n),i=$("#"+n+"-feedback"),u=$(r).hasClass("on");$.ajax({url:t,type:"get",async:!0,data:{isEnabled:u},success:function(t){t?($(i).html("Eingabe gespeichert"),$(i).css("display","inline-block"),$(i).fadeOut(1e3)):(changeInputSwitch(n),$(i).html("Fehler beim speichern"),$(i).css("display","inline-block"),$(i).fadeOut(1e3))},error:function(){changeInputSwitch(n);$(i).html("Fehler beim speichern");$(i).css("display","inline-block");$(i).fadeOut(1e3)}})}function setCoachingEnabled(){changeInputSwitch("enable-coaching");var n=$("#enable-coaching").hasClass("on");$.ajax({url:"/Profile/SetCoachingEnabled",type:"get",async:!0,data:{isEnabled:n},success:function(t){t?(n?$(".lernhilfe-enabled").fadeIn("fast"):$(".lernhilfe-enabled").fadeOut("fast"),$("#enable-coaching-feedback").html("Eingabe gespeichert"),$("#enable-coaching-feedback").css("display","inline-block"),$("#enable-coaching-feedback").fadeOut(1e3)):(changeInputSwitch("enable-coaching"),$("#enable-coaching-feedback").html("Fehler beim speichern"),$("#enable-coaching-feedback").css("display","inline-block"),$("#enable-coaching-feedback").fadeOut(1e3))},error:function(){changeInputSwitch("enable-coaching");$("#enable-coaching-feedback").html("Fehler beim speichern");$("#enable-coaching-feedback").css("display","inline-block");$("#enable-coaching-feedback").fadeOut(1e3)}})}function setClassDropdown(n,t,i){$("#"+t).attr("enabled",!1);$("#"+t+" option[value!='0']").remove();$.ajax({url:"/FormHelper/SchoolClasses",type:"get",async:!0,data:{schoolId:$("#"+n).val()},success:function(n){$.each(n,function(n,i){$("#"+t).append($("<option/>").attr("value",i).text(i+". Klasse"))});i!=0&&$("#"+t).val(i);$("#"+t).attr("enabled",!0)},error:function(){}})}function loadStream(){$("#stream-container-loading").show();$("#stream-container-load-more").hide();$.get("/Start/Stream",function(n){n.length>0?($("#stream-container").html($("#stream-container").html()+n),$("#stream-container-loading").hide(),$("#stream-container").fadeIn("medium"),$("#stream-container-load-more").fadeIn("medium")):$("#stream-container-loading").hide()})}function loadEvents(){$("#events-container").load("/Start/Events",function(){$("#events-container-loading").hide();$("#events-container").fadeIn("medium")})}function loadMyProfileCoachings(n,t){$("#my-offers").html("lade Lernhilfen ...");$.ajax({url:"/FormHelper/MyCoachingOffers",type:"get",async:!0,data:{userId:t},success:function(i){i&&i.length>0?($("#my-offers").html(""),jQuery.each(i,function(i,r){n?$("#my-offers").html($("#my-offers").html()+'<a href="javascript:void(0);" class="link-button" onclick="loadEditCoachingForm('+r.Id+')" data-ot="'+r.Comments+'">'+r.SubjectCategory.Name+"<\/a>"):$("#my-offers").html($("#my-offers").html()+'<a href="javascript:void(0);" class="link-button" onclick="loadRequestCoachingForm(\''+t+"', '0', '"+r.SubjectCategory.Id+'\')" data-ot="'+r.Comments+'">'+r.SubjectCategory.Name+"<\/a>")}),$("#my-offers a").each(function(){$(this).attr("data-ot")!="null"&&$(this).opentip($(this).attr("data-ot"),{"extends":"alert",color:"#000000",background:"#ffffff",shadow:!0,borderColor:"#e5e5e5",tipJoint:"bottom",target:!0,hideOn:"mouseout",hideTriggers:["target","tip"]})}),$("#my-offers").show(),$("#choaching-request-btn").show()):$("#my-offers").hide()},error:function(){$("#my-offers").hide()}})}function loadMyCoachingTimes(n,t){$("#my-times").html("lade Lernhilfenzeiten ...");$.ajax({url:"/FormHelper/MyCoachingTimes",type:"get",async:!0,data:{userId:t},success:function(t){t&&t.length>0?($("#my-times").html(""),jQuery.each(t,function(t,i){n?$("#my-times").html($("#my-times").html()+'<a href="javascript:void(0);" class="link-button timetable" onclick="loadEditCoachingTimeForm('+i.Day+')"><span class="day">'+weekdays[i.Day]+'<\/span><br/><span class="time">'+i.From+'<\/span> - <span class="time">'+i.To+"<\/span><\/a>"):$("#my-times").html($("#my-times").html()+'<div class="timetable"><span class="day">'+weekdays[i.Day]+'<\/span><br/><span class="time">'+i.From+'<\/span> - <span class="time">'+i.To+"<\/span><\/div>")}),$("#my-times").show(),$("#choaching-request-btn").show()):$("#my-times").hide()},error:function(){$("#my-times").hide()}})}function loadAddCoachingForm(){$("#add-coaching-frame").attr("src","/Profile/AddCoaching");$("#modal-add-coaching").modal("show")}function loadEditCoachingForm(n){$("#edit-coaching-frame").attr("src","/Profile/EditCoaching?id="+n);$("#modal-edit-coaching").modal("show")}function loadAddCoachingTimeForm(){$("#add-coaching-time-frame").attr("src","/Profile/AddCoachingTime");$("#modal-add-coaching-time").modal("show")}function loadEditCoachingTimeForm(n){$("#edit-coaching-time-frame").attr("src","/Profile/EditCoachingTime?day="+n);$("#modal-edit-coaching-time").modal("show")}function loadEditPriceForm(){$("#edit-price-frame").attr("src","/Profile/EditCoachingPrice");$("#modal-edit-price").modal("show")}function loadRequestCoachingForm(n,t,i){var r="/Profile/CoachingRequest?toUserId="+n+"&searchClass="+t+"&subjectCategoryId="+i;$("#request-coaching-frame").attr("src",r);$("#modal-request-coaching").modal("show")}function loadHomeEvents(){$("#home-events").load("/Home/Events",function(){$("#home-events-loading").hide();$("#home-events").fadeIn("medium")})}function searchCoaching(){validateMandatoryOnlyForm()&&($("#search-results").hide(),$("#search-loading").show(),$("#search-results").load("/Search/Search?Class="+$("#Class").val()+"&SubjectCategoryId="+$("#SubjectCategoryId").val(),function(){$("#search-loading").hide();$("#search-results").css("opacity",0);$("#search-results").show();applySearchFilter();$("#search-results").css("opacity",1);$("#search-results > article:visible:odd").css("float","right")}))}function applySearchFilter(){var n,t,i,r;$("#filter-school").hasClass("on")||$("#filter-school").hasClass("on")?(n=$("#filter-city").attr("data-filter-value"),t="data-city-value",$("#filter-city").hasClass("on")?($(".filterable-search-result["+t+"!='"+n+"']").hide(),$(".filterable-search-result["+t+"='"+n+"']").show()):(i=$("#filter-school").attr("data-filter-value"),r="data-school-value",$("#filter-school").hasClass("on")&&($(".filterable-search-result["+r+"!='"+i+"']").hide(),$(".filterable-search-result["+r+"='"+i+"']").show()))):$(".filterable-search-result").show();$("#search-results > article:visible:even").css("float","left");$("#search-results > article:visible:odd").css("float","right");$("#search-results > article:visible").length==0?$("#no-filter-results").show():$("#no-filter-results").hide()}function searchTeachers(){validateMandatoryOnlyForm()&&($("#search-results").hide(),$("#search-loading").show(),$("#search-results").load("/Teacher/Search?SchoolId="+$("#SchoolId").val()+"&SubjectCategoryId="+$("#SubjectCategoryId").val(),function(){$("#search-loading").hide();$("#search-results").fadeIn("medium")}))}function filterEvents(){$("#event-overview").hide();$("#search-loading").show();$("#event-overview").load("/Events/Filter/?filter="+$("#filter").val()+"&isFilter=true",function(){$("#search-loading").hide();$("#event-overview").fadeIn("medium")})}function loadEventRegistrationForm(n){$("#event-register-frame").attr("src","/Events/Register/"+n);$("#modal-event-register").modal("show")}function loadEventOpenSeats(n){$("#event-open-seats").html("lade freie Plätze ...");$.ajax({url:"/Events/GetOpenSeats",type:"get",async:!0,data:{eventId:n},success:function(n){n?$("#event-open-seats").html("Noch freie Plätze: "+n):$("#event-open-seats").html("Keine Plätze mehr frei")},error:function(){$("#event-open-seats").html("0")}})}function cancelEventRegistration(n){confirm("Willst du dich wirklich abmelden?")&&$.ajax({url:"/Events/CancelRegistration",type:"get",async:!0,data:{eventId:n},success:function(t){loadEventOpenSeats(n);$("#register-link").css("display","inline-block");$("#register-link-bottom").css("display","inline-block");$("#cost-info").css("display","inline-block");t==0?($("#first-bonus").show(),$("#second-bonus").hide()):($("#first-bonus").hide(),$("#second-bonus").show());$("#unregister-link").hide();$("#registered").hide()},error:function(){}})}function sendMessage(n,t,i,r,u){sendSemaphore||(lockApiCall("btn-coaching-request-accept"),$.ajax({url:"/FormHelper/SendMessage",type:"get",async:!0,data:{conversationId:n,fromUserId:t,toUserId:i,targetId:r,text:u},success:function(n){if(n){var t=document.createElement("div");$(t).addClass("item");$(t).html('<div class="profile-img"><a href="/Profile/Index/'+n.UserId+'" class="image-link" style="background: url(\''+n.UserImage+'\');"><\/a><\/div><div class="content"><h3>'+n.Username+"<span>"+n.CreatedDate+"<\/span><\/h3><p>"+n.Text+"<\/p><\/div><\/div>");$(t).appendTo($("#timeline-container"));$("#coaching-new-message").val("");$("#coaching-new-message-btn").hide()}unlockApiCall("coaching-new-message-btn")},error:function(){unlockApiCall("coaching-new-message-btn")}}))}function checkNotifications(){$.ajax({url:"/Notification/Count",type:"get",async:!0,success:function(n){setNotificationCount(n,!0)},error:function(){}})}function setNotificationCount(n,t){var r=$("#notification-link"),u=$(r).find("img"),f=$(u).attr("id")+"-active.png",i=document.title.lastIndexOf("(");n&&n!="0"?($("#notification-count").html(n),$(u).attr("src","/Images/"+f),t?$("#notification-count").fadeIn("fast"):$("#notification-count").show(),document.title=i!=-1?document.title.substring(0,i)+" ("+n+")":document.title+" ("+n+")",$(r).addClass("sticky")):(f=$(u).attr("id")+".png",$("#notification-count").hide(),i!=-1&&(document.title=document.title.substring(0,i)),$(r).removeClass("sticky"))}function loadNotifactionlist(){$("#notification-list").hide();$("#notification-list-loading").show();$("#notification-list").load("/Notification/PopupList",function(){$("#notification-list-loading").hide();$("#notification-list").fadeIn("medium")})}function loadInvitePopup(){$("#invite-frame").attr("src","/Invite/");$("#modal-invite").modal("show")}function loadNoSchoolPopup(){$("#no-school-frame").attr("src","/NoSchool/");$("#modal-no-school").modal("show")}function shareFacebook(n){return window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(n),"facebook-share-dialog","width=626,height=436"),!1}function shareGoogle(n){return window.open("https://plus.google.com/share?url="+encodeURIComponent(n),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600"),!1}function shareTwitter(n){return window.open("https://twitter.com/share?url="+encodeURIComponent(n),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600"),!1}function loadAddSchoolForm(){$("#add-school-frame").attr("src","/FormHelper/AddSchoolForm");$("#modal-add-school").modal("show")}function loadSearchSchoolForm(){$("#search-school-frame").attr("src","/FormHelper/SearchSchoolForm");$("#modal-search-school").modal("show")}function loadSearchSchoolFormProfile(n){n&&$("#school-popup-headline-text").html("Schule freischalten");$("#search-school-frame").attr("src","/FormHelper/SearchSchoolFormProfile");$("#modal-search-school").modal("show")}function loadAddSubjectForm(){$("#add-subject-frame").attr("src","/FormHelper/AddSubjectForm");$("#modal-add-subject").modal("show")}function addSubjectLogged(){$("#new-subject").val().length==0?$("#new-subject").addClass("error"):($("#new-subject").removeClass("error"),$("#add-subject-button").attr("disabled","disabled"),$.ajax({url:"/FormHelper/AddSubjectLoggedUser",type:"get",async:!0,data:{subject:$("#new-subject").val()},success:function(){$("#add-subject-form").hide();$("#add-subject-msg").fadeIn();$("#add-subject-button").removeAttr("disabled");window.setTimeout("toggleAddSubject();",4e3)},error:function(){}}))}function loadTalentometer(n){$("#talentometer").hide();$("#talentometer-loading").show();$("#talentometer").load("/Profile/Talentometer?userId="+n,function(){$("#talentometer-loading").hide();$("#talentometer").fadeIn("medium")})}function loadBadges(n){$("#badges").hide();$("#badges-loading").show();$("#badges").load("/Profile/Badges?userId="+n,function(){$("#badges-loading").hide();$("#badges").fadeIn("medium")})}function loadFeedbackForm(){$("#feedback-frame").attr("src","/FormHelper/FeedbackForm");$("#modal-feedback").modal("show")}function searchSchools(n){validateMandatoryOnlyForm()&&($("#search-results").hide(),$("#search-loading").show(),$("#search-results").load("/FormHelper/SearchSchools?bundesland="+$("#bundesland").val()+"&schoolTypeId="+$("#SchoolTypeId").val()+"&name="+$("#Name").val()+"&address="+$("#Address").val(),function(){n||$("#add-school-link").hide();$("#search-loading").hide();$("#search-results").fadeIn("medium")}))}function shareFacebookUi(n,t,i){FB.ui({method:"feed",link:n,picture:"https://www.talentify.me/Images/talentecheck/"+t,name:"Der große Talentecheck",caption:"Der große Talentecheck",description:i},function(n){n!=null&&$.ajax({url:"/Highscore/AddShareBonus",type:"get",async:!0,data:{network:"fb"},success:function(){},error:function(){}})})}function getUrlParam(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+n+"=([^&#]*)",r=new RegExp(i),t=r.exec(window.location.href);return t==null?"":t[1]}var sendSemaphore=!1,weekdays=["Mo","Di","Mi","Do","Fr","Sa","So"];
/*
//# sourceMappingURL=api.min.js.map
*/